<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Text Game</title>
  <!--link rel="stylesheet" href="icon.css"-->
  <!--link href="https://fonts.googleapis.com/css?family=Scope+One" rel="stylesheet"-->
  <!--link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700" rel="stylesheet" type="text/css"-->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
  <style>
    html {
      font-family: Roboto, "Trebuchet MS", Arial, sans-serif;
    }
    .text {
      line-height: 1.75em;
      font-size: 1.25em;
      padding: 1em;
    }
  	.panel{
  		height: 100vh;
      width: 100vw;
      position: relative;
      padding: 0;
      margin: 0;
  	}
    #wcbj {
      position: absolute;
      top: 0;
      width: 200px;
      left: -200px;
      transition: 2000ms ease-out;
    }
    #wcbj.flew {
      transform: translate(100vw, 100vh);
    }
    .text {
      width: 60%;
      font-family: "Scope One", Roboto, Arial, sans-serif;
      font-weight: 700;
    }
    .text.right {
      float: right;
    }
    p {
      text-indent: 2em;
      opacity: 0;
      transition: 500ms ease-in-out;
      font-size: 2.5vmin;
      line-height: calc(2.5vmin + 5px;)
    }
    p.visible {
      opacity: 1 !important;
    }
    body {
      margin: 0;
    }
    #billy {
      margin: 5px;
      right: 0;
      height: 100%;
      position: absolute;
    }
    .green{
  		margin-bottom: 400px;
      background-color: green;
  	}
    .grey {
  		margin-bottom: 400px;
      background-color: #fff;
    }
    .blue {
  		margin-bottom: 600px;
      background-color: #2196f3;
    }
    .bordeaux {
  		margin-bottom: 400px;
      background-color: brown;
    }
    .thingy-right {
      position: absolute;
      z-index: 999;
      top: -60px;
      left: 0;
      width: 0px;
      height: 0px;
      border-top: 60px solid rgba(0, 0, 0, 0);
      border-bottom: 0px solid rgba(0, 0, 0, 0);
      border-left: 100vw solid #fff;
    }
    .thingy-green {
      position: absolute;
      z-index: 200;
      bottom: calc(1vh - 60px);
      left: 0;
      width: 0px;
      height: 0px;
      border-top: 120px solid rgba(0, 0, 0, 0);
      border-bottom: 0px solid rgba(0, 0, 0, 0);
      border-left: 100vw solid green;
    }
    .thingy-left {
      position: absolute;
      z-index: 999;
      top: -100px;
      left: 0;
      width: 0px;
      height: 0px;
      border-top: 100px solid rgba(0, 0, 0, 0);
      border-bottom: 0px solid rgba(0, 0, 0, 0);
      border-right: 100vw solid #2196f3;
    }
    #arrow {
      font-size: 20em;
      margin: auto;
      top: calc(40%);
      right: 0;
      position: absolute;
      transition: 1000ms ease-in-out;
    }
    #arrow.down {
      transform: translate(0, 20%);
    }
    #arrow.away {
      transform: translate(0, 500%)
    }
    .side {
      width: 30vw;
      height: 100vh;
      position: absolute;
    }
    #title {
      font-family: "Product Sans", Roboto, "Trebuchet MS", sans-serif;
      font-size: 4em;
      transition: 500ms ease-in-out;
      position: absolute;
      margin-left: 10px;
    }
    #title.move {
      transform: translate(0, -5em);
    }
  </style>
  <div style="height: 100vh; width: 100vw;">
    <section class="panel blue">
      <i id="arrow" class="material-icons">arrow_downward</i>
      <h1 id="title">The Origin of Billy Bluejay</h1>
      <div class="text right">
        <p>Edward Creighton and John Creighton were brothers who lived in the developing city of Omaha, Nebraska. Edward was a strong-willed, ambitious man. He helped to build the telegraph lines from New York to California. Then, he began his own business--First National Bank.</p>
        <p>The end of Edward’s life happened suddenly and unexpectedly. He died as he was entering a meeting for First National Bank. When John heard about this, he fell into extreme despair. The days became weeks as John mourned his brother’s death. The gods felt pity for John and decided that Edward deserved to return to his brother.</p>
        <p>However, none of the gods had the power to raise a human from the dead; so, they decided to bring Edward back in the form of an animal. “But what animal?” they wondered amongst themselves.</p>
        <p>Eventually, they settled on a blue jay because of its loud, assertive nature. Edward was loud in the way that he was a huge advocate for a great many movements, such as anti-slavery and the selection of Omaha as the terminus for the Union Pacific Railroad. He was also strong and independent like the blue jay, digging holes for telegraph lines and trekking across the country.</p>
      </div>
    </section>
    <section class="panel grey">
    <div class="thingy-right"></div>
    <div class="thingy-green"></div>
    <img src="/bluejay.gif" alt="bluejay" id="wcbj" />
      <div class="text">
        <p>John woke up to find himself in a tree overlooking his business’s building. Experimentally, he flapped his wings and jumped from the tree. He spread his wings and floated to the ground. Interested in the project his brother had started working on, Edward flew to the construction site. He noticed his brother sitting at the edge of the site, obviously sad. Ed swooped down from the sky and landed next to John. He chirped loudly and got John’s attention.</p>
        <p>“Hello, little blue jay. What’s got you all worked up?” John fluttered around for a bit, but he realized he could not speak. All was not lost, though, for John attended a football game the next day.</p>
      </div>
    </section>
    <section class="panel blue">
    <div class="thingy-left"></div>
      <div class="text right">
        <p>That very next day, Edward found John in the stadium. When the home team got a touchdown, Edward squawked with glee. It was at that moment that John realized whom he was in the company of.</p>
        <p>“Edward, is that you?”</p>
        <p>The blue bird nodded his head.</p>
        <p>“Wow… how did this happen?”</p>
        <p>It was then that the gods spoke to John. They explained that they brought Edward back to him, but he must never tell of his brother’s resurrection. With this, Edward returned to his project, Creighton College, and told his wife, Mary Lucretia, to make the school mascot a blue jay.</p>
      </div>
    </section>
    <section class="panel grey">
    <div class="thingy-right"></div>
      <img id="billy" src="https://www.creighton.edu/fileadmin/user/CSU/images/Billy_Bluejay_RGB.jpg">
      <div class="text">
        <p>That very next day, Edward found John in the stadium. When the home team got a touchdown, Edward squawked with glee. It was at that moment that John realized whom he was in the company of.</p>
      </div>
    </section>
  </div>

  <script src="/jquery.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.16/webfont.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.5/ScrollMagic.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.5/plugins/debug.addIndicators.min.js"></script>
  <script>

  WebFont.load({
    google: {
      families: ['Scope One', 'Roboto', 'Product Sans']
    }
  });

  var cumulativeOffset = function(element) {
    var top = 0, left = 0;
    do {
      top += element.offsetTop  || 0;
      left += element.offsetLeft || 0;
      element = element.offsetParent;
    } while(element);

    return {
      top: top,
      left: left
    };
  };

  function toggleClass(selector, Class) {
    var ele = $(selector)
    ele.hasClass(Class) ? ele.removeClass(Class) : ele.addClass(Class)
    return(ele)
  }

  var inter;

  $(function(){
    var controller = new ScrollMagic.Controller({
      globalSceneOptions: {
        triggerHook: 'onLeave'
      }
    });

    slides = document.querySelectorAll("section.panel")

    for (var i=0; i < slides.length; i++) {
      var t = new ScrollMagic.Scene({
        triggerElement: slides[i]
      })
      .setPin(slides[i])
      .addIndicators()
      .addTo(controller)
    }

    new ScrollMagic.Scene({
      offset: cumulativeOffset(document.querySelector("#wcbj")).top
    })
    .setClassToggle("#wcbj", "flew")
    .addIndicators()
    .addTo(controller)

    pars = document.querySelectorAll("p")

    for (var i=0; i < pars.length; i++) {
      pars[i].id = "para" + i
      new ScrollMagic.Scene({
        offset: cumulativeOffset(pars[i]).top
      })
      .setClassToggle("#para" + i, "visible")
      .addIndicators()
      .addTo(controller)
    }

    new ScrollMagic.Scene({
      offset: cumulativeOffset($("#para0")[0]).top
    })
    .setClassToggle("h1", "move")
    .addIndicators()
    .addTo(controller)

    new ScrollMagic.Scene({
      offset: cumulativeOffset($("#para0")[0]).top
    })
    .setClassToggle("#arrow", "away")
    .addIndicators()
    .addTo(controller)

    inter = setInterval(function () {
      toggleClass("#arrow", "down")
      $("#arrow").hasClass("away") ? setTimeout(function(){$("#arrow")[0].style.display = "none"}, 1000) : $("#arrow")[0].style.display = "block"
    }, 1000);
  });
  </script>

</body>
</html>
